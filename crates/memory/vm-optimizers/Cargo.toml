[package]
name = "vm-optimizers"
version = "0.1.0"
edition = "2024"
description = "Unified optimization framework for VM - GC, memory, PGO, and ML-guided compilation"

[features]
async = ["tokio", "num_cpus"]
default = []

[dependencies]
# Hakari-managed dependencies
vm-build-deps = { path = "../../architecture/vm-build-deps" }
vm-core = { path = "../../core/vm-core" }
parking_lot = { workspace = true }
log = { workspace = true }
serde = { workspace = true }
thiserror = { workspace = true }
cfg-if = "1.0"
futures = "0.3"
tokio = { workspace = true, features = ["rt-multi-thread", "macros", "time"], optional = true }
num_cpus = { version = "1.16", optional = true }

# 并发和GC支持
crossbeam-utils = "0.8"

# GC crate - resolves circular dependency with vm-core
vm-gc = { path = "../../memory/vm-gc" }
crossbeam-epoch = "0.9"
crossbeam-queue = "0.3"

[dev-dependencies]
criterion = { workspace = true }
rayon = "1.8"
rand = { workspace = true }
tokio = { workspace = true, features = ["rt-multi-thread", "macros"] }
