[package]
name = "vm-core"
version = "0.1.0"
edition = "2024"

[dependencies]
# Hakari-managed dependencies - temporarily removed for build stability
log = { workspace = true }
parking_lot = { workspace = true }
serde = { workspace = true }
uuid = { workspace = true }
serde_json = { workspace = true }
toml = { workspace = true }
chrono = { workspace = true, optional = true }
miniz_oxide = { workspace = true }
bincode = { workspace = true }
anyhow = { workspace = true }
thiserror = { workspace = true }
regex = { workspace = true }
backtrace = { workspace = true }
num_cpus = { workspace = true }
dashmap = "6.0"

# GC crate
vm-gc = { path = "../../memory/vm-gc" }

tokio = { workspace = true, optional = true }
futures = { workspace = true, optional = true }
async-trait = { workspace = true, optional = true }

[features]
default = ["std"]
std = []
async = ["tokio", "futures", "async-trait"]

# Architecture features - used by macros
x86_64 = []
arm64 = []
riscv64 = []

# Event sourcing feature
enhanced-event-sourcing = ["chrono", "tokio"]

# Optimization application feature
optimization_application = []

# GPU acceleration features (placeholder - actual implementation in vm-passthrough)
cuda = []
rocm = []
gpu = ["cuda", "rocm"]

[dev-dependencies]
proptest = "1.0"

