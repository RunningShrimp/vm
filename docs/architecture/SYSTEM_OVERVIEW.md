# 系统总体架构

## 目录

- [系统概述](#系统概述)
- [架构设计原则](#架构设计原则)
- [技术栈选择](#技术栈选择)
- [系统分层架构](#系统分层架构)
- [主要组件](#主要组件)
- [数据流图](#数据流图)
- [部署架构](#部署架构)
- [性能特性](#性能特性)

---

## 系统概述

VM项目是一个用Rust编写的多架构虚拟机实现，支持RISC-V64、ARM64和x86-64架构。系统采用模块化设计，具有高性能、可扩展和易维护的特点。

### 核心能力

- **多架构支持**: RISC-V64、ARM64、x86-64
- **执行模式**: 解释器、JIT编译、硬件辅助虚拟化
- **内存管理**: 软件MMU、TLB优化、多级页表
- **设备仿真**: VirtIO设备、MMIO、DMA
- **高级特性**: 迁移、快照、调试、监控

### 设计目标

1. **性能**: 通过JIT编译和优化技术实现接近原生的执行效率
2. **可扩展性**: 模块化架构支持新架构和新特性的快速添加
3. **可维护性**: 清晰的职责分离和标准化的接口设计
4. **安全性**: Rust的内存安全保证和严格的错误处理

---

## 架构设计原则

### 1. SOLID原则

#### 单一职责原则 (SRP)
每个模块和组件都有明确的单一职责：
- `vm-core`: 核心类型和trait定义
- `vm-interface`: 统一的接口规范
- `vm-engine`: 执行引擎实现
- `vm-mem`: 内存管理子系统
- `vm-device`: 设备仿真框架

#### 开闭原则 (OCP)
系统对扩展开放，对修改封闭：
- 通过trait定义扩展点
- 插件式的设备架构
- 可配置的执行模式选择

#### 里氏替换原则 (LSP)
所有实现都严格遵守接口契约：
- `ExecutionEngine` trait的所有实现可互换
- `MMU` trait的不同实现可透明替换
- `Decoder` trait支持多种架构

#### 接口隔离原则 (ISP)
接口精简且专注：
- 细粒度的trait定义
- 客户端依赖最小化的接口
- 避免fat interface

#### 依赖倒置原则 (DIP)
高层模块不依赖低层模块：
- 通过trait抽象依赖关系
- 依赖注入模式
- 工厂模式创建组件

### 2. 领域驱动设计 (DDD)

```
┌─────────────────────────────────────────────────────────┐
│                    应用层 (Application)                  │
│  vm-service, vm-runtime, vm-boot, vm-cli, vm-desktop   │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                    领域层 (Domain)                       │
│     vm-core (聚合根、领域服务、值对象、领域事件)          │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                  基础设施层 (Infrastructure)              │
│   vm-engine, vm-mem, vm-device, vm-frontend, vm-ir      │
└─────────────────────────────────────────────────────────┘
```

**关键模式**:
- **聚合根**: `Vm`, `Vcpu`, `Device`
- **值对象**: `GuestAddr`, `GuestPhysAddr`, `PageFlags`
- **领域服务**: `TranslationService`, `OptimizationService`
- **领域事件**: `VmStarted`, `BlockCompiled`, `PageFault`

### 3. 充血模型

采用充血模型（Rich Domain Model）设计，将业务逻辑封装在领域对象内部：

```rust
// 示例: VirtIO块设备充血模型
pub struct VirtioBlockDevice {
    // 状态字段（私有）
    config: VirtioBlockConfig,
    queue: VirtQueue,
    request_queue: Vec<BlockRequest>,
    backend: Box<dyn BlockBackend>,
}

impl VirtioBlockDevice {
    // 业务逻辑方法
    pub fn process_request(&mut self, req: BlockRequest) -> BlockResult {
        req.validate()?;  // 验证
        self.check_queue_space()?;
        self.execute_request(req)
    }
}
```

**优势**:
- 高内聚性：数据和行为紧密绑定
- 类型安全：强类型的业务规则
- 易于测试：纯函数式的业务逻辑
- 可复用性：领域服务可在不同上下文复用

### 4. 依赖注入和工厂模式

```rust
// 工厂模式创建执行引擎
pub trait ExecutionEngineFactory {
    fn create_interpreter(&self, config: &Config) -> Box<dyn ExecutionEngine>;
    fn create_jit(&self, config: &Config) -> Box<dyn ExecutionEngine>;
    fn create_hybrid(&self, config: &Config) -> Box<dyn ExecutionEngine>;
}

// 依赖注入
pub struct VirtualMachine<E: ExecutionEngine> {
    engine: E,
    mmu: Box<dyn MMU>,
    decoder: Box<dyn Decoder>,
}
```

---

## 技术栈选择

### 编程语言: Rust 2024 Edition

**选择理由**:
- **内存安全**: 编译时保证，无需GC
- **零成本抽象**: 高级特性不影响性能
- **并发安全**: 类型系统的并发控制
- **丰富的类型系统**: enum、trait、generics
- **优秀的工具链**: Cargo、rustfmt、clippy
- **FFI能力**: 与C库和硬件接口无缝集成

**Rust 2024特性**:
```rust
// 版本要求
rust-version = "1.85"
edition = "2024"

// 使用的新特性
- let-else 绑定
- const generics 增强版
- async trait 稳定版
- pattern matching 改进
```

### 核心依赖

```toml
# 异步运行时
tokio = { version = "1.48", features = ["full"] }

# 序列化
serde = { version = "1.0", features = ["derive"] }
bincode = "2.0.1"  # 零拷贝序列化

# 并发
parking_lot = "0.12"  # 高性能锁
futures = "0.3"       # Future抽象

# 数据结构
hashbrown = "0.16.1"  # 优化的HashMap
indexmap = "2.12.1"   # 有序Map
smallvec = "1.15.1"   # 栈上小向量

# GPU加速
wgpu = "28"  # 跨平台GPU抽象
```

### 平台特定依赖

```toml
# Linux: KVM虚拟化
[target.'cfg(target_os = "linux")'.dependencies]
kvm-ioctls = "0.24"
kvm-bindings = "0.14"
vfio-bindings = "0.6"

# macOS: Hypervisor框架
[target.'cfg(target_os = "macos")'.dependencies]
apple_frameworks = ["Hypervisor"]

# Windows: Hyper-V
[target.'cfg(windows)'.dependencies]
windows = { version = "0.62", features = ["Win32_System_Hypervisor"] }
```

---

## 系统分层架构

### 架构层次图

```
┌──────────────────────────────────────────────────────────────┐
│                        用户界面层                             │
│  vm-desktop (Tauri) │ vm-cli │ vm-monitor (Web UI)          │
└──────────────────────────────────────────────────────────────┘
                              ↓
┌──────────────────────────────────────────────────────────────┐
│                         应用层                               │
│  vm-service (VM管理) │ vm-runtime (生命周期) │ vm-boot       │
└──────────────────────────────────────────────────────────────┘
                              ↓
┌──────────────────────────────────────────────────────────────┐
│                         领域层                               │
│              vm-core (核心类型、trait、事件)                  │
└──────────────────────────────────────────────────────────────┘
                              ↓
┌──────────────────────────────────────────────────────────────┐
│                        基础设施层                             │
│ ┌───────────┐ ┌──────────┐ ┌────────┐ ┌─────────┐ ┌───────┐ │
│ │vm-engine  │ │ vm-mem   │ │vm-device│ │vm-frontend│ │vm-ir│ │
│ │ 执行引擎   │ │ 内存管理  │ │ 设备仿真 │ │ 指令解码  │ │ IR  │ │
│ └───────────┘ └──────────┘ └────────┘ └─────────┘ └───────┘ │
└──────────────────────────────────────────────────────────────┘
                              ↓
┌──────────────────────────────────────────────────────────────┐
│                      平台抽象层                               │
│  vm-platform │ vm-accel │ vm-smmu │ vm-passthrough          │
└──────────────────────────────────────────────────────────────┘
                              ↓
┌──────────────────────────────────────────────────────────────┐
│                      硬件/OS层                               │
│       KVM │ Hypervisor.Framework │ Hyper-V │ Host CPU        │
└──────────────────────────────────────────────────────────────┘
```

### 层次职责

#### 1. 用户界面层
- **职责**: 提供用户交互界面
- **组件**:
  - `vm-desktop`: 桌面GUI应用（基于Tauri）
  - `vm-cli`: 命令行工具
  - `vm-monitor`: Web监控界面

#### 2. 应用层
- **职责**: 编排领域对象，实现用例
- **组件**:
  - `vm-service`: VM管理服务
  - `vm-runtime`: VM生命周期管理
  - `vm-boot`: 启动和初始化

#### 3. 领域层
- **职责**: 核心业务逻辑和规则
- **组件**:
  - `vm-core`: 聚合根、值对象、领域服务
  - `vm-interface`: 统一接口规范

#### 4. 基础设施层
- **职责**: 技术实现和外部集成
- **组件**:
  - `vm-engine`: 执行引擎实现
  - `vm-mem`: 内存管理
  - `vm-device`: 设备仿真
  - `vm-frontend`: 指令解码
  - `vm-ir`: 中间表示

#### 5. 平台抽象层
- **职责**: 隔离平台差异
- **组件**:
  - `vm-platform`: 平台检测和抽象
  - `vm-accel`: 硬件加速
  - `vm-smmu`: IOMMU仿真
  - `vm-passthrough`: 设备透传

---

## 主要组件

### 核心组件树

```
vm-project/
├── vm-core/                 # 核心类型和trait
│   ├── config/             # 配置管理
│   ├── domain/             # 领域模型
│   ├── error/              # 错误类型
│   ├── mmu_traits/         # MMU接口
│   └── event_store/        # 事件存储
│
├── vm-interface/           # 统一接口规范
│   ├── core/               # 核心接口
│   ├── engine/             # 执行引擎接口
│   ├── memory/             # 内存接口
│   └── device/             # 设备接口
│
├── vm-engine/              # 执行引擎
│   ├── interpreter/        # 解释器
│   ├── jit/                # JIT编译器
│   └── executor/           # 执行器
│
├── vm-mem/                 # 内存子系统
│   ├── mmu/                # MMU实现
│   ├── tlb/                # TLB优化
│   ├── phys_mem/           # 物理内存
│   └── async_mmu/          # 异步MMU
│
├── vm-device/              # 设备仿真
│   ├── virtio/             # VirtIO设备
│   ├── block/              # 块设备
│   ├── net/                # 网络设备
│   └── interrupt/          # 中断控制器
│
├── vm-frontend/            # 指令前端
│   ├── riscv64/            # RISC-V解码
│   ├── aarch64/            # ARM64解码
│   └── x86_64/             # x86解码
│
├── vm-ir/                  # 中间表示
│   ├── ir_block/           # 基本块
│   ├── ir_inst/            # IR指令
│   └── passes/             # 优化pass
│
├── vm-runtime/             # 运行时
│   ├── vm/                 # VM实例
│   ├── vcpu/               # VCPU管理
│   └── scheduler/          # 调度器
│
├── vm-service/             # 服务层
│   ├── vm_service/         # VM服务
│   ├── device_service/     # 设备服务
│   └── migration_service/  # 迁移服务
│
└── vm-accel/               # 硬件加速
    ├── kvm/                # KVM支持
    ├── hvf/                # HVM支持
    └── whp/                # WHP支持
```

### 组件交互关系

```
┌──────────────────────────────────────────────────────────┐
│                      vm-service                          │
│                  (VM管理服务)                             │
└────────────────────┬─────────────────────────────────────┘
                     │ 创建和管理
                     ↓
┌──────────────────────────────────────────────────────────┐
│                      vm-runtime                          │
│              (VM生命周期管理)                              │
│  ┌────────────────────────────────────────────────────┐  │
│  │            VirtualMachine (聚合根)                  │  │
│  │  - vcpus: Vec<Vcpu>                                │  │
│  │  - memory: PhysicalMemory                          │  │
│  │  - devices: DeviceManager                          │  │
│  │  - engine: Box<dyn ExecutionEngine>                │  │
│  └────────────────────────────────────────────────────┘  │
└─────┬──────────────┬──────────────┬───────────────────────┘
      │              │              │
      ↓              ↓              ↓
┌─────────┐   ┌──────────┐   ┌──────────┐
│ vcpu    │   │ memory   │   │ devices  │
│ (vCPU)  │   │ (内存)    │   │ (设备)    │
└────┬────┘   └────┬─────┘   └────┬─────┘
     │             │              │
     ↓             ↓              ↓
┌─────────┐   ┌──────────┐   ┌──────────┐
│engine   │   │  mmu     │   │ virtio   │
│(执行引擎)│   │ (MMU)    │   │ (设备)    │
└────┬────┘   └────┬─────┘   └────┬─────┘
     │             │              │
     ↓             ↓              ↓
┌─────────┐   ┌──────────┐   ┌──────────┐
│decoder  │   │  tlb     │   │ interrupt│
│(解码器)  │   │ (TLB)    │   │ (中断)    │
└─────────┘   └──────────┘   └──────────┘
```

---

## 数据流图

### 执行流程

```
Guest二进制程序
      │
      ↓
┌─────────────────────────────────────────────────────────┐
│              指令获取 (Fetch)                            │
│  ┌──────────────────────────────────────────────────┐  │
│  │ PC → TLB查找 → 物理内存 → 指令缓存               │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────┐
│              指令解码 (Decode)                           │
│  ┌──────────────────────────────────────────────────┐  │
│  │ vm-frontend: 架构特定解码器                      │  │
│  │  - RISC-V decoder                               │  │
│  │  - ARM64 decoder                                │  │
│  │  - x86_64 decoder                               │  │
│  │                                                   │  │
│  │ 原始指令 → IR指令                                 │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────┐
│              IR优化 (Optimize)                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │ vm-optimizers: 优化pass                          │  │
│  │  - 常量折叠                                       │  │
│  │  - 死代码消除                                     │  │
│  │  - 寄存器分配                                     │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────┐
│              执行 (Execute)                             │
│  ┌──────────────────────────────────────────────────┐  │
│  │ vm-engine: 执行引擎                              │  │
│  │                                                   │  │
│  │ 解释模式:                                        │  │
│  │   解释器逐条执行IR指令                            │  │
│  │                                                   │  │
│  │ JIT模式:                                         │  │
│  │   IR → 代码生成 → 机器码 → 执行                  │  │
│  │                                                   │  │
│  │ 混合模式:                                        │  │
│  │   热点检测 → JIT编译 → 执行                      │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────┐
│              内存访问 (Memory Access)                    │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 虚拟地址 → MMU翻译 → TLB → 物理内存              │  │
│  │                                                   │  │
│  │ 1. TLB查找 (快速路径)                            │  │
│  │ 2. 页表遍历 (慢速路径)                            │  │
│  │ 3. 权限检查                                       │  │
│  │ 4. 物理内存访问                                   │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────┐
│              设备访问 (Device Access)                    │
│  ┌──────────────────────────────────────────────────┐  │
│  │ MMIO/PIO → 设备路由 → 设备处理 → 中断            │  │
│  │                                                   │  │
│  │ VirtIO设备:                                      │  │
│  │  - VirtQueue处理                                  │  │
│  │  - DMA传输                                        │  │
│  │  - 中断注入                                       │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                     ↓
                  更新状态
                  (寄存器、PC)
                     ↓
                  继续执行
```

### 内存访问流程

```
Guest虚拟地址
      │
      ↓
┌─────────────────────────────────────────────────────────┐
│                 TLB查找                                 │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 快速路径: O(1)查找                               │  │
│  │  - 分离的ITLB和DTLB                              │  │
│  │  - 多路组相联                                    │  │
│  │  - ASID支持                                      │  │
│  └──────────────────────────────────────────────────┘  │
└────────────┬────────────────────────────────────────────┘
             │
      命中?  │  未命中
             ↓
      返回物理地址             ↓
             │    ┌────────────────────────────────────────┐
             │    │         MMU页表遍历                    │
             │    │  ┌──────────────────────────────────┐  │
             │    │  │ 1. CR3获取页表基址               │  │
             │    │  │ 2. 多级页表遍历                  │  │
             │    │  │ 3. 权限检查 (R/W/X/U/S)          │  │
             │    │  │ 4. 访问位和脏位设置              │  │
             │    │  │ 5. TLB填充                       │  │
             │    │  └──────────────────────────────────┘  │
             │    └────────────────────────────────────────┘
             │    └────────────────────────────────────────┘
             ↓                ↓
┌─────────────────────────────────────────────────────────┐
│                物理内存访问                             │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 1. 检查物理地址范围                              │  │
│  │ 2. MMIO区域检查                                   │  │
│  │ 3. 物理内存访问                                   │  │
│  │ 4. 字节序处理                                     │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────┘
                     ↓
              返回数据/完成
```

---

## 部署架构

### 单机部署

```
┌─────────────────────────────────────────────────────────┐
│                    Host操作系统                          │
│  ┌───────────────────────────────────────────────────┐  │
│  │              vm-desktop (GUI)                     │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │              vm-cli (命令行)                      │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │         vm-service (系统服务)                     │  │
│  │                                                   │  │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐           │  │
│  │  │  VM-1   │  │  VM-2   │  │  VM-N   │           │  │
│  │  └─────────┘  └─────────┘  └─────────┘           │  │
│  └───────────────────────────────────────────────────┘  │
│                                                           │
│  硬件虚拟化支持: KVM/HVF/WHP                             │
└─────────────────────────────────────────────────────────┘
```

### 远程部署

```
┌─────────────────┐         ┌─────────────────┐
│   客户端机器     │         │   服务器机器     │
│                 │         │                 │
│ ┌─────────────┐ │  网络   │ ┌─────────────┐ │
│ │ vm-desktop  │ │◄───────►│ │ vm-service  │ │
│ │ (GUI客户端) │ │         │ │ (远程服务)   │ │
│ └─────────────┘ │         │ └─────────────┘ │
│                 │         │                 │
│ ┌─────────────┐ │         │ ┌─────────────┐ │
│ │ vm-monitor  │ │◄───────►│ │  VM实例     │ │
│ │ (监控工具)   │ │         │ │             │ │
│ └─────────────┘ │         │ └─────────────┘ │
└─────────────────┘         └─────────────────┘
```

### 云原生部署

```
┌─────────────────────────────────────────────────────────┐
│                    Kubernetes集群                        │
│  ┌───────────────────────────────────────────────────┐  │
│  │            vm-service Deployment                   │  │
│  │                                                   │  │
│  │  ┌──────────────┐  ┌──────────────┐              │  │
│  │  │   Pod-1      │  │   Pod-2      │              │  │
│  │  │  ┌────────┐  │  │  ┌────────┐  │              │  │
│  │  │  │VM-1..10│  │  │  │VM-11..20│  │              │  │
│  │  │  └────────┘  │  │  └────────┘  │              │  │
│  │  └──────────────┘  └──────────────┘              │  │
│  └───────────────────────────────────────────────────┘  │
│                                                           │
│  ┌───────────────────────────────────────────────────┐  │
│  │            vm-monitor Service                     │  │
│  │              (Web监控界面)                         │  │
│  └───────────────────────────────────────────────────┘  │
│                                                           │
│  持久化存储: PostgreSQL (事件存储、VM状态)                 │
└─────────────────────────────────────────────────────────┘
```

---

## 性能特性

### 性能指标

#### 执行性能

| 模式 | 相对原生性能 | 启动时间 | 内存占用 | 适用场景 |
|------|-------------|---------|---------|---------|
| 解释器 | 1-5% | <10ms | 低 | 调试、轻量负载 |
| JIT | 50-80% | 100-500ms | 中 | 通用计算 |
| 混合 | 30-70% | 10-50ms | 中 | 自适应优化 |
| 硬件辅助 | 95-99% | <50ms | 低 | 系统虚拟化 |

#### 内存性能

| 组件 | 吞吐量 | 延迟 | 优化技术 |
|------|-------|------|---------|
| TLB | >10M ops/s | <5ns | 多路组相联、ASID |
| MMU | >1M translations/s | <100ns | 页表缓存、惰性填充 |
| 物理内存 | >5GB/s | <50ns | mmap、huge pages |

### 优化技术

#### 1. 执行优化
- **热点检测**: 基本块执行计数
- **分层编译**: 解释器 → 优化JIT
- **代码缓存**: LRU缓存编译代码
- **内联优化**: 热点函数内联

#### 2. 内存优化
- **TLB优化**: 分离的ITLB/DTLB
- **页表优化**: 大页支持(2MB/1GB)
- **零拷贝**: 避免不必要的内存复制
- **内存池**: 预分配常用对象

#### 3. 并发优化
- **多vCPU**: SMP支持
- **异步IO**: tokio运行时
- **无锁结构**: 原子操作、RCU
- **NUMA感知**: CPU亲和性

#### 4. 设备优化
- **VirtIO**: 高效 virtqueue 实现
- **批量处理**: 批量IO请求
- **中断合并**: 减少中断频率
- **DMA**: 零拷贝数据传输

---

## 可扩展性设计

### 水平扩展

```
┌─────────────────────────────────────────────────────────┐
│                  负载均衡器                              │
└───────────┬───────────────┬───────────────┬──────────────┘
            ↓               ↓               ↓
┌───────────────┐   ┌───────────────┐   ┌───────────────┐
│ vm-service-1  │   │ vm-service-2  │   │ vm-service-N  │
│  (VM实例1-10) │   │ (VM实例11-20) │   │ (VM实例...)   │
└───────────────┘   └───────────────┘   └───────────────┘
            ↓               ↓               ↓
      ┌─────────────────────────────────────────────────┐
      │            共享存储 (PostgreSQL)                │
      │  - VM状态                                        │
      │  - 事件流                                        │
      │  - 快照                                          │
      └─────────────────────────────────────────────────┘
```

### 垂直扩展

- **多vCPU**: 支持多达256个vCPU
- **大内存**: TB级内存支持
- **设备热插拔**: 运行时添加/移除设备
- **资源限制**: CPU/内存/IO限制

---

## 安全特性

### 内存安全

```rust
// Rust编译器保证的内存安全
pub struct SafeBuffer {
    data: Vec<u8>,
}

impl SafeBuffer {
    // 编译时检查边界
    pub fn read(&self, offset: usize, size: usize) -> Option<&[u8]> {
        if offset + size <= self.data.len() {
            Some(&self.data[offset..offset + size])
        } else {
            None  // 安全失败
        }
    }
}
```

### 隔离机制

- **虚拟化隔离**: Guest间完全隔离
- **内存隔离**: 地址空间隔离
- **设备隔离**: 设备分配和权限控制
- **资源隔离**: CPU、内存配额

### 安全加固

- **ASLR**: 地址空间布局随机化
- **堆栈保护**: Stack canaries
- **NX位**: 不可执行保护
- **SMEP/SMAP**: 内核模式保护

---

## 监控和调试

### 性能监控

```
vm-monitor
  ├── CPU使用率
  ├── 内存使用
  ├── 执行统计
  ├── TLB命中率
  └── 设备IO
```

### 调试支持

- **GDB远程调试**: gdbstub实现
- **性能剖析**: perf集成
- **日志追踪**: 结构化日志
- **事件追踪**: 事件溯源

---

## 文档导航

- [核心组件详情](./CORE_COMPONENTS.md)
- [执行引擎架构](./EXECUTION_ENGINE.md)
- [内存系统设计](./MEMORY_SYSTEM.md)
- [指令前端架构](./INSTRUCTION_FRONTEND.md)
- [设备仿真框架](./DEVICE_EMULATION.md)

---

**文档版本**: 1.0
**最后更新**: 2025-12-31
**作者**: VM开发团队
