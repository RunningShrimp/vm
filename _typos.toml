# typos配置文件
# 用于检测源代码中的拼写错误

# 指定要检查的文件类型
files = [
    "*.rs",
    "*.toml",
    "*.md",
    "*.yml",
    "*.yaml",
    "*.sh",
    "*.txt",
]

# 排除的文件和目录
exclude = [
    "target/",
    "Cargo.lock",
    "*.lock",
    "*.bak",
    "*.pyc",
    "*.svg",
    "*.png",
    "*.jpg",
    "*.jpeg",
    "*.gif",
    "vm-build-deps/",  # hakari生成的文件
    "*.rlib",  # 编译产物
    "*.so",
    "*.dylib",
    "*.dll",
    "*.exe",
]

# 隐藏文件
hidden = [
    ".git/",
    ".github/",
    "target/",
]

# 二进制文件
binary = [
    "*.png",
    "*.jpg",
    "*.jpeg",
    "*.gif",
    "*.svg",
    "*.zip",
    "*.tar",
    "*.gz",
    "*.bz2",
    "*.xz",
]

# 扩展配置
[default]
extend-ignore-identifiers-re = [
    # 技术术语和缩写
    "TLB",  # Translation Lookaside Buffer
    "MMU",  # Memory Management Unit
    "JIT",  # Just-In-Time
    "AOT",  # Ahead-Of-Time
    "API",  # Application Programming Interface
    "CPU",  # Central Processing Unit
    "GPU",  # Graphics Processing Unit
    "NPU",  # Neural Processing Unit
    "VM",   # Virtual Machine
    "RISC", # Reduced Instruction Set Computer
    "ARM",  # Advanced RISC Machines
    "HV",   # Hypervisor Framework (Apple)
    "KVM",  # Kernel-based Virtual Machine
    "WHP",  # Windows Hypervisor Platform
    "VZ",   # Virtualization Framework (Apple)
    "SMMU", # I/O Memory Management Unit
    "NUMA", # Non-Uniform Memory Access
    "SIMD", # Single Instruction Multiple Data
    "THP",  # Transparent Huge Pages
    "ASID", # Address Space ID
    "LLVM", # Low Level Virtual Machine
    "IR",   # Intermediate Representation
    "LTO",  # Link Time Optimization
    "PGO",  # Profile-Guided Optimization

    # 编程术语
    "serde", "tokio", "anyhow", "thiserror",
    "rustfmt", "clippy", "cargo",
    "crate", "rustc", "rustup",
    "mut", "ref", "dyn", "impl",
    "struct", "enum", "trait", "union",
    "const", "static", "let", "fn",
    "macro", "macro_rules",
    "vec", "hashmap", "btreemap",
    "arc", "mutex", "rwlock",

    # 项目特定术语
    "virtio", "vhost", "qemu",
    "cranelift", "codegen", "frontend",
    "backend", "decoder", "encoder",
    "syscall", "kernel", "userspace",
    "guest", "host", "hypervisor",
    "emulator", "interpreter", "translator",

    # 保留的变量名和标识符
    "addr", "len", "val", "val1", "val2",
    "idx", "num", "str", "buf", "ctx",
    "cfg", "opt", "arg", "args", "ret",
    "err", "res", "msg", "src", "dst",
    "vaddr", "paddr", "gpa", "hpa",
    "vcpu", "pdev", "ioport", "mmio",
    "rs", "rb", "rwx", "prot",

    # 常见英文单词（即使在代码中也是正确的）
    "TODO", "FIXME", "XXX", "HACK", "NOTE",
    "INFO", "WARN", "DEBUG", "TRACE",
    "README", "CHANGELOG", "LICENSE",

    # 专有名词和品牌
    "GitHub", "GitLab", "Bitbucket",
    "Linux", "Ubuntu", "Debian", "Fedora",
    "macOS", "Windows", "Android", "iOS",
    "Rust", "Python", "JavaScript", "TypeScript",
    "Apple", "Intel", "AMD", "NVIDIA", "Qualcomm",
    "HTTP", "HTTPS", "TCP", "UDP", "IP",
    "JSON", "XML", "HTML", "CSS", "SQL",

    # 其他
    "stderr", "stdout", "stdin",
    "errno", "EINVAL", "EPERM", "ENOENT",
    "usize", "isize", "u8", "u16", "u32", "u64",
    "i8", "i16", "i32", "i64", "f32", "f64",
    "bool", "str", "String", "Vec", "Box",
    "Option", "Result", "None", "Some", "Ok", "Err",
    "Async", "Await", "Future", "Stream",
    "Send", "Sync", "Copy", "Clone", "Debug",
    "Display", "ToString", "From", "Into",
]

[default.extend-words]
# 忽略一些特定的单词模式
ignore-words = [
    # 正则表达式模式
    ".*_rs$",  # Rust文件名模式
    "0x[0-9a-fA-F]+",  # 十六进制数字
    "\\b[0-9]+\\b",  # 纯数字
]

[type.rs]
# Rust源代码特定配置
extend-ignore-identifiers-re = [
    # Rust特定模式
    "macro_rules",
    "derive",
    "async",
    "await",
    "move",
    "static",
    "ref",
    "mut",
    "where",
    "impl",
    "const",
    "fn",
    "let",
    "if",
    "else",
    "match",
    "for",
    "while",
    "loop",
    "return",
    "break",
    "continue",
    "use",
    "mod",
    "pub",
    "crate",
    "super",
    "self",
    "Self",
]

[type.toml]
# TOML配置文件特定配置
check-filenames = false

[type.md]
# Markdown文档特定配置
extend-ignore-identifiers-re = [
    # 文档中的示例代码
    "```.*```",
]

[type.sh]
# Shell脚本特定配置
extend-ignore-identifiers-re = [
    # Shell变量和命令
    "\\$\\{?\\w+\\}?",
    "\\bif\\b",
    "\\bthen\\b",
    "\\bfi\\b",
    "\\bfor\\b",
    "\\bdo\\b",
    "\\bdone\\b",
    "\\bcase\\b",
    "\\besac\\b",
]

[typos.typos]
# typos工具本身的配置
default = [
    "iso",
    "en-US",
]
