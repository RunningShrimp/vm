[package]
name = "vm-mem"
version = "0.1.0"
edition = "2024"

[lib]
path = "src/lib.rs"

[dependencies]
vm-core = { path = "../vm-core" }
memmap2 = { version = "0.9", optional = true }
libc = "0.2"
lru = "0.16"
parking_lot = "0.12.5"
dashmap = "6.1"
crossbeam = "0.8"
async-trait = { version = "0.1", optional = true }
tokio = { version = "1.48", features = ["fs", "io-util", "sync"], optional = true }
thiserror = "2.0"

[dev-dependencies]
criterion = "0.8"

[[bench]]
name = "mmu_translate"
harness = false

[[bench]]
name = "tlb_optimized"
harness = false

[features]
default = ["std", "tlb-basic"]
std = []
async = ["tokio", "async-trait"]
memmap = ["memmap2"]
no_std = []
tlb-basic = []
tlb-optimized = []
tlb-concurrent = []
