[package]
name = "vm-passthrough"
version = "0.1.0"
edition = "2024"

[dependencies]
# Hakari-managed dependencies
vm-build-deps = { path = "../../crates/architecture/vm-build-deps" }
vm-core = { path = "../../crates/core/vm-core" }
vm-ir = { path = "../../crates/core/vm-ir" }
log = { workspace = true }
thiserror = { workspace = true }
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true }

[dependencies.cudarc]
version = "0.12"
optional = true
features = ["nvrtc", "cuda-version-from-build-system"]

[features]
default = []
# CUDA GPU support (requires CUDA SDK)
cuda = ["cudarc"]
# ROCm GPU support (requires ROCm SDK)
rocm = []
# ARM NPU support (experimental)
npu = []
# All GPU/NPU features (for convenience)
gpu = ["cuda", "rocm"]
all-accelerators = ["cuda", "rocm", "npu"]

[target.'cfg(target_os = "linux")'.dependencies]
libc = { workspace = true }

[target.'cfg(target_os = "windows")'.dependencies]
windows = { version = "0.62", features = ["Win32_Devices_DeviceAndDriverInstallation"] }
