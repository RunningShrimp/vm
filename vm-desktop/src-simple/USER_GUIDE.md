# VM Manager 使用指南

## 🎯 快速开始

### 方式 1: 直接在浏览器中打开（最简单）

1. 找到 `vm-desktop/src-simple/` 目录
2. 双击打开 `index.html` 文件
3. 开始使用！

**注意**: 这种方式使用模拟数据，无需后端。

### 方式 2: 使用启动脚本（推荐）

#### macOS / Linux
```bash
cd vm-desktop/src-simple
./start.sh
```

#### Windows
```batch
cd vm-desktop\src-simple
start.bat
```

然后打开浏览器访问 `http://localhost:8000`

### 方式 3: 手动启动服务器

**使用 Python:**
```bash
cd vm-desktop/src-simple
python3 -m http.server 8000
```

**使用 PHP:**
```bash
cd vm-desktop/src-simple
php -S localhost:8000
```

**使用 Node.js:**
```bash
cd vm-desktop/src-simple
npx serve
```

## 📖 功能详解

### 1. 概览面板（Dashboard）

当你第一次打开 VM Manager，会看到概览面板：

```
┌─────────────────────────────────────────────┐
│ ⚡ VM Manager                    🔄 🔔   │
│ 概览                                 │
│ 系统状态总览                            │
└─────────────────────────────────────────────┘
│                                             │
│ 📊 统计卡片                                │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐       │
│ │ 🖥️ 3    │ │ ▶️ 1    │ │ ⏸️ 2    │       │
│ │总虚拟机 │ │运行中   │ │已停止   │       │
│ └─────────┘ └─────────┘ └─────────┘       │
│                                             │
│ 🎯 快速操作                                │
│ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐│
│ │➕ 创建  │ │▶️ 启动  │ │⏹️ 停止  │ │📥 导入  ││
│ │虚拟机  │ │所有    │ │所有    │ │配置    ││
│ └────────┘ └────────┘ └────────┘ └────────┘│
│                                             │
│ 📈 系统状态                                │
│ CPU 使用率    ████████░░  45%              │
│ 内存使用      ██████████  67%              │
│ 磁盘使用      ████████░░  45%              │
│                                             │
│ 📝 最近活动                                │
│ • 2 分钟前  系统启动                       │
│ • 5 分钟前  虚拟机 Ubuntu Server 已启动      │
└─────────────────────────────────────────────┘
```

### 2. 创建虚拟机

点击"创建虚拟机"按钮：

```
┌─────────────────────────────────────┐
│ 创建虚拟机                    ✕   │
├─────────────────────────────────────┤
│                                     │
│ 虚拟机名称 *                         │
│ [Ubuntu Server               ]      │
│                                     │
│ CPU 核心数 *   内存 (MB) *          │
│ [2        ]   [2048       ]        │
│                                     │
│ 磁盘大小 (GB) *                      │
│ [50         ]                      │
│                                     │
│ 显示模式                            │
│ [图形界面 ▼]                        │
│                                     │
│                    [取消]  [创建]   │
└─────────────────────────────────────┘
```

**步骤**:
1. 输入虚拟机名称（如：Ubuntu Server）
2. 选择 CPU 核心数（默认：2）
3. 设置内存大小（默认：2048 MB）
4. 设置磁盘大小（默认：50 GB）
5. 选择显示模式（GUI / Terminal / Headless）
6. 点击"创建"按钮

### 3. 管理虚拟机

在"虚拟机"视图中，你会看到所有虚拟机的卡片：

```
┌──────────────────────────┐ ┌──────────────────────────┐
│ 💽                      │ │ 💽                      │
│ [运行中]           [暂停] │ │ [已停止]          [启动]│
│ Ubuntu Server            │ │ Windows 11              │
│ ─────────────────         │ │ ─────────────────         │
│ 📊 4 核心                │ │ 📊 8 核心                │
│ 💾 8192 MB               │ │ 💾 16384 MB              │
│ 💿 100 GB                │ │ 💿 200 GB                │
│                          │ │                          │
│ [▶️ 启动]  [详情]        │ │ [⏸️ 暂停]  [详情]        │
└──────────────────────────┘ └──────────────────────────┘
```

**操作**:
- **点击卡片**: 查看详细信息
- **启动按钮**: 启动已停止的虚拟机
- **暂停按钮**: 暂停运行中的虚拟机
- **详情按钮**: 查看完整配置和性能指标

### 4. 查看虚拟机详情

点击任意虚拟机卡片，弹出详情对话框：

```
┌────────────────────────────────────────┐
│ Ubuntu Server                      ✕ │
├────────────────────────────────────────┤
│                                        │
│ 📋 基本信息                           │
│ 状态:     运行中                      │
│ CPU:      4 核心                      │
│ 内存:     8192 MB                    │
│ 磁盘:     100 GB                     │
│                                        │
│ 📊 性能指标                           │
│ CPU 使用率    内存使用    运行时间     │
│    45%        2.4 GB     2h          │
│                                        │
│ 🎮 控制按钮                           │
│ [▶️ 启动] [⏸️ 暂停] [⏹️ 停止] [🗑️ 删除]  │
└────────────────────────────────────────┘
```

### 5. 搜索和过滤

**搜索**:
- 在搜索框中输入虚拟机名称
- 结果会实时更新

**过滤**:
- 全部状态：显示所有虚拟机
- 运行中：只显示运行中的虚拟机
- 已停止：只显示已停止的虚拟机
- 已暂停：只显示已暂停的虚拟机

## 🎨 界面说明

### 侧边栏导航

左侧导航栏包含：

- **🏠 概览**: 系统状态总览
- **🖥️ 虚拟机**: 管理所有虚拟机（带数量徽章）
- **📊 监控**: 性能监控和分析
- **⚙️ 设置**: 配置和偏好

### 顶部工具栏

- **标题区域**: 当前页面标题和描述
- **刷新按钮**: 手动刷新数据
- **通知按钮**: 查看系统通知

### 状态指示

虚拟机有三种状态：

- **▶️ 运行中**: 绿色背景，虚拟机正在运行
- **⏸️ 已暂停**: 黄色背景，虚拟机已暂停
- **⏹️ 已停止**: 红色背景，虚拟机已停止

## ⌨️ 键盘快捷键

目前支持以下快捷键（可扩展）：

- `Esc`: 关闭模态框
- `Enter`: 提交表单

## 🔔 通知系统

操作完成后会显示通知：

- ✅ **成功**: 绿色通知（如：虚拟机已启动）
- ⚠️ **警告**: 黄色通知（如：没有虚拟机可停止）
- ❌ **错误**: 红色通知（如：无法连接到后端）

通知会在 3 秒后自动消失。

## 💡 使用技巧

### 1. 批量操作

在概览面板使用"快速操作"：
- **启动所有**: 一键启动所有已停止的虚拟机
- **停止所有**: 一键停止所有运行中的虚拟机

### 2. 快速创建

在任何视图点击侧边栏的"➕ 创建虚拟机"按钮。

### 3. 实时更新

界面每 5 秒自动更新一次，也可以手动点击刷新按钮。

### 4. 开发模式

在没有 Tauri 后端的情况下，界面会使用模拟数据：
- 3 个预置虚拟机
- 模拟的性能数据
- 完整的交互功能

## 🐛 故障排查

### 问题 1: 打开 index.html 看到空白页面

**解决方案**:
1. 打开浏览器开发者工具（F12）
2. 查看控制台是否有错误
3. 确保所有文件（index.html, styles.css, app.js）在同一目录

### 问题 2: 样式显示不正常

**解决方案**:
1. 确保 `styles.css` 文件存在
2. 检查 HTML 中的 `<link>` 标签路径是否正确
3. 清除浏览器缓存后重试

### 问题 3: 虚拟机操作没有响应

**解决方案**:
1. 检查浏览器控制台是否有 JavaScript 错误
2. 确保在开发模式下（使用模拟数据）
3. 如果使用 Tauri，确保后端服务正在运行

### 问题 4: 无法启动服务器

**解决方案**:
1. 确保端口 8000 没有被占用
2. 尝试使用其他端口：
   ```bash
   python3 -m http.server 8888
   ```
3. 检查防火墙设置

## 📊 性能优化建议

### 1. 大量虚拟机

当虚拟机数量超过 50 个时：
- 考虑实现虚拟滚动
- 使用分页显示
- 延迟加载图片

### 2. 实时更新

当前每 5 秒更新一次，可以调整：
```javascript
// 在 app.js 中修改
setInterval(async () => {
    await loadVMs();
}, 5000); // 修改这个值（毫秒）
```

### 3. 浏览器兼容性

推荐使用现代浏览器：
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 🔧 高级配置

### 修改模拟数据

编辑 `app.js` 中的 `getMockVMs()` 函数：

```javascript
function getMockVMs() {
    return [
        {
            id: '1',
            name: '我的虚拟机',      // 自定义名称
            state: 'Running',        // 状态
            cpu_count: 8,            // CPU
            memory_mb: 16384,        // 内存
            disk_gb: 200,            // 磁盘
            display_mode: 'GUI'      // 显示模式
        }
        // 添加更多...
    ];
}
```

### 自定义颜色

编辑 `styles.css` 中的 CSS 变量：

```css
:root {
    --primary-color: #6366f1;      /* 主色调 */
    --success-color: #10b981;      /* 成功色 */
    --warning-color: #f59e0b;      /* 警告色 */
    --danger-color: #ef4444;       /* 危险色 */
}
```

### 修改窗口大小

编辑 `tauri.conf.json`：

```json
{
  "app": {
    "windows": [
      {
        "width": 1600,           // 修改宽度
        "height": 1000,          // 修改高度
        "minWidth": 1200,        // 最小宽度
        "minHeight": 800         // 最小高度
      }
    ]
  }
}
```

## 📱 移动设备支持

VM Manager 支持响应式设计，在移动设备上：
- 侧边栏变为水平滚动菜单
- 卡片网格变为单列布局
- 模态框全屏显示
- 按钮和字体大小自动调整

## 🎓 学习资源

### HTML/CSS/JavaScript
- MDN Web 文档: https://developer.mozilla.org/
- W3Schools: https://www.w3schools.com/

### Tauri
- 官方文档: https://tauri.app/
- Tauri 教程: https://tauri.app/v1/guides/

### 虚拟化技术
- KVM: https://www.linux-kvm.org/
- QEMU: https://www.qemu.org/
- VirtualBox: https://www.virtualbox.org/

## 🤝 获取帮助

- 📖 查看文档: `README.md`
- 🐛 报告问题: GitHub Issues
- 💬 讨论交流: GitHub Discussions

---

**祝您使用愉快！** ⚡
